-- --------------------------------------------------------
-- Hôte :                        192.168.1.89
-- Version du serveur:           10.1.23-MariaDB-9+deb9u1 - Raspbian 9.0
-- SE du serveur:                debian-linux-gnueabihf
-- HeidiSQL Version:             9.5.0.5196
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


-- Export de la structure de la base pour MACC1
CREATE DATABASE IF NOT EXISTS `MACC1` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;
USE `MACC1`;

-- Export de la structure de la table MACC1. BATIMENT
CREATE TABLE IF NOT EXISTS `BATIMENT` (
  `ID` smallint(6) NOT NULL AUTO_INCREMENT,
  `NOM_BAT` char(32) DEFAULT NULL,
  `NUM_SALLE` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `NOM_BAT` (`NOM_BAT`),
  KEY `FK1_NUM_SALLE` (`NUM_SALLE`),
  CONSTRAINT `FK1_NUM_SALLE` FOREIGN KEY (`NUM_SALLE`) REFERENCES `ESPSALLE` (`NUM_SALLE`),
  CONSTRAINT `FK_NOM_BAT` FOREIGN KEY (`NOM_BAT`) REFERENCES `ESPSALLE` (`NOM_BAT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Export de données de la table MACC1.BATIMENT : ~0 rows (environ)
/*!40000 ALTER TABLE `BATIMENT` DISABLE KEYS */;
/*!40000 ALTER TABLE `BATIMENT` ENABLE KEYS */;

-- Export de la structure de la table MACC1. CAPTEUR
CREATE TABLE IF NOT EXISTS `CAPTEUR` (
  `ID_CAPTEUR` smallint(6) NOT NULL AUTO_INCREMENT,
  `NOM_BAT` char(32) NOT NULL,
  `NUM_SALLE` int(11) NOT NULL,
  `TEMPERATURE` float DEFAULT NULL,
  `HUMIDITE` float DEFAULT NULL,
  `DATE_JOUR` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`ID_CAPTEUR`),
  KEY `FK_BAT` (`NOM_BAT`),
  KEY `FK2_NUM_SALLE` (`NUM_SALLE`),
  CONSTRAINT `FK2_NUM_SALLE` FOREIGN KEY (`NUM_SALLE`) REFERENCES `ESPSALLE` (`NUM_SALLE`),
  CONSTRAINT `FK_BAT` FOREIGN KEY (`NOM_BAT`) REFERENCES `ESPSALLE` (`NOM_BAT`)
) ENGINE=InnoDB AUTO_INCREMENT=62 DEFAULT CHARSET=utf8mb4;

-- Export de données de la table MACC1.CAPTEUR : ~4 rows (environ)
/*!40000 ALTER TABLE `CAPTEUR` DISABLE KEYS */;
INSERT INTO `CAPTEUR` (`ID_CAPTEUR`, `NOM_BAT`, `NUM_SALLE`, `TEMPERATURE`, `HUMIDITE`, `DATE_JOUR`) VALUES
	(58, 'BTV', 14, 25.3, 60.6, '2018-06-07 10:59:59'),
	(59, 'BTV', 14, 25.3, 60.7, '2018-06-07 11:00:59'),
	(60, 'BTV', 14, 25.2, 60.4, '2018-06-07 11:02:01'),
	(61, 'BTV', 14, 25.2, 61, '2018-06-07 11:03:00');
/*!40000 ALTER TABLE `CAPTEUR` ENABLE KEYS */;

-- Export de la structure de la table MACC1. ESPSALLE
CREATE TABLE IF NOT EXISTS `ESPSALLE` (
  `NUM_SALLE` int(11) NOT NULL,
  `IP_CLIM` char(32) NOT NULL,
  `ADRESSE_MACESP` char(32) NOT NULL,
  `NOM_BAT` char(50) DEFAULT NULL,
  PRIMARY KEY (`ADRESSE_MACESP`),
  KEY `SALLE_BAT` (`NUM_SALLE`),
  KEY `NOM_BAT` (`NOM_BAT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Export de données de la table MACC1.ESPSALLE : ~2 rows (environ)
/*!40000 ALTER TABLE `ESPSALLE` DISABLE KEYS */;
INSERT INTO `ESPSALLE` (`NUM_SALLE`, `IP_CLIM`, `ADRESSE_MACESP`, `NOM_BAT`) VALUES
	(16, '192.168.1.2', '25:25:25:25:25', 'BTV'),
	(14, '192.168.137.227', '30:ae:a4:38:30:84:', 'BTV');
/*!40000 ALTER TABLE `ESPSALLE` ENABLE KEYS */;

-- Export de la structure de la table MACC1. FIXER_CONSIGNE
CREATE TABLE IF NOT EXISTS `FIXER_CONSIGNE` (
  `ID_JOUR` smallint(6) NOT NULL,
  `NUM_SALLE` int(11) NOT NULL,
  `HORAIRE_EXTINCTION` time DEFAULT NULL,
  `TEMPERATURE` decimal(10,2) DEFAULT NULL,
  `HORAIRE_ALLUMAGE` time DEFAULT NULL,
  `NOM_BAT` char(50) DEFAULT NULL,
  PRIMARY KEY (`ID_JOUR`),
  KEY `FK3_NUM_SALLE` (`NUM_SALLE`),
  KEY `NOM_BAT` (`NOM_BAT`),
  CONSTRAINT `FK2_NOM_BAT` FOREIGN KEY (`NOM_BAT`) REFERENCES `ESPSALLE` (`NOM_BAT`),
  CONSTRAINT `FK3_NUM_SALLE` FOREIGN KEY (`NUM_SALLE`) REFERENCES `ESPSALLE` (`NUM_SALLE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Export de données de la table MACC1.FIXER_CONSIGNE : ~1 rows (environ)
/*!40000 ALTER TABLE `FIXER_CONSIGNE` DISABLE KEYS */;
INSERT INTO `FIXER_CONSIGNE` (`ID_JOUR`, `NUM_SALLE`, `HORAIRE_EXTINCTION`, `TEMPERATURE`, `HORAIRE_ALLUMAGE`, `NOM_BAT`) VALUES
	(1, 16, NULL, 20.00, NULL, 'BTV');
/*!40000 ALTER TABLE `FIXER_CONSIGNE` ENABLE KEYS */;

-- Export de la structure de la table MACC1. PROFESSEUR
CREATE TABLE IF NOT EXISTS `PROFESSEUR` (
  `ID_PROF` smallint(6) NOT NULL,
  `NOM` varchar(128) DEFAULT NULL,
  `PRENOM` varchar(128) DEFAULT NULL,
  `LOGIN` varchar(128) DEFAULT NULL,
  `MDP` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`ID_PROF`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Export de données de la table MACC1.PROFESSEUR : ~1 rows (environ)
/*!40000 ALTER TABLE `PROFESSEUR` DISABLE KEYS */;
INSERT INTO `PROFESSEUR` (`ID_PROF`, `NOM`, `PRENOM`, `LOGIN`, `MDP`) VALUES
	(0, 'JL', 'Laurent', 'D.Jean', 'JL20');
/*!40000 ALTER TABLE `PROFESSEUR` ENABLE KEYS */;

-- Export de la structure de la table MACC1. TRAME_IR
CREATE TABLE IF NOT EXISTS `TRAME_IR` (
  `IDTRAMEIR` smallint(6) NOT NULL,
  `ENCODING` char(32) DEFAULT NULL,
  `CODE` char(32) DEFAULT NULL,
  `RAWDATA` text,
  `MODE` char(32) DEFAULT NULL,
  `NOM_SALLE` char(32) DEFAULT NULL,
  PRIMARY KEY (`IDTRAMEIR`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Export de données de la table MACC1.TRAME_IR : ~1 rows (environ)
/*!40000 ALTER TABLE `TRAME_IR` DISABLE KEYS */;
INSERT INTO `TRAME_IR` (`IDTRAMEIR`, `ENCODING`, `CODE`, `RAWDATA`, `MODE`, `NOM_SALLE`) VALUES
	(0, NULL, NULL, '6436,4280,620,488,648,1584,628,484,620,1616,620,488,624,1612,624,484,628,1660,652,1584,652,1584,652,456,652,456,652,460,652,456,652,456,652,492,656,452,656,452,656,456,656,452,632,476,656,1580,652,1584,652,508,632,480,624,484,652,456,628,484,652,456,620,488,624,484,652,512,620,1616,620,1612,624,488,592,516,592,516,592,1644,592,516,592,572,592,516,592,516,592,516,592,1644,592,516,592,520,592,1640,592,560,600,512,568,540,564,544,568,540,568,544,564,544,564,544,568,592,568,544,568,540,568,540,572,536,572,540,568,540,596,512,572,588,596,512,600,512,596,512,596,512,596,512,572,536,600,512,596,552,592,1644,592,516,592,1640,592,520,592,1640,592,520,592,516,564,580,568,540,596,512,596,516,568,1664,596,516,596,1636,596,516,596,564,596,1640,596,512,624,1612,620,492,592,1644,592,1640,592,520,592,1572,592', 'OFF', NULL);
/*!40000 ALTER TABLE `TRAME_IR` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
